# Quick Start Guide: LLM Title Generation

## What's New?
Chat sessions now automatically get descriptive titles generated by AI instead of generic "New Chat" labels.

## Features

### 1. Automatic Title Generation
- **When**: After you send the first message in a new chat
- **What**: AI analyzes your message and creates a concise, descriptive title (max 6 words)
- **Example**: 
  - Your message: "Can you help me analyze this sales data from Q3?"
  - Generated title: "Q3 Sales Data Analysis"

### 2. Manual Title Regeneration
- **How**: 
  1. Hover over any chat session in the sidebar
  2. Click the three-dot menu icon (â‹®)
  3. Select "Regenerate Title"
- **Use Case**: If the auto-generated title isn't quite right

## How It Works

```
You type a message â†’ AI reads it â†’ Generates smart title â†’ Updates automatically
```

## Prerequisites

Make sure these are running:
1. **Ollama Server**: `ollama serve`
2. **FastMCP Backend**: `python server/main.py`
3. **Bridge Server**: `python bridge_server.py`
4. **Frontend**: `npm run dev` (in frontend/ directory)

## Example Workflow

### Scenario: Starting a New Project Chat

1. **Open workspace** â†’ Click "New Chat" button
2. **Send first message**: "I need help building a React authentication system with JWT"
3. **Auto-generated title**: "React JWT Authentication System"
4. **Result**: Easy to find in sidebar later!

### Scenario: Fixing a Title

1. **Find chat** in sidebar with unclear title
2. **Hover** over the chat session
3. **Click** three-dot menu (â‹®)
4. **Select** "Regenerate Title"
5. **Wait** 2-3 seconds for new title
6. **Done** - title updates automatically

## Tips for Best Titles

### âœ… Good First Messages (Create Better Titles):
- "How do I deploy a Next.js app to Vercel?"
- "Debug this Python pandas error in data processing"
- "Create a SQL query for customer analytics"

### âŒ Poor First Messages (Generic Titles):
- "Hello"
- "Can you help?"
- "Question"

## Fallback Behavior

If AI title generation fails (Ollama offline, network issue):
- **Fallback 1**: Uses first 50 characters of your message
- **Fallback 2**: Shows "New Chat" if all else fails

You won't lose functionality - it just degrades gracefully!

## Troubleshooting

### Title shows "New Chat" instead of AI-generated
**Problem**: Ollama not running
**Solution**: 
```bash
ollama serve
```

### Title generation takes too long
**Problem**: Ollama model not pulled
**Solution**:
```bash
ollama pull llama3:8b
```

### Context menu not appearing
**Problem**: JavaScript not loaded
**Solution**: Hard refresh browser (Cmd/Ctrl + Shift + R)

### "Regenerate Title" button grayed out
**Problem**: Chat has no messages yet
**Solution**: Send at least one message first

## Configuration

### Change the AI Model
Edit [bridge_server.py:573](bridge_server.py#L573):
```python
# Default model
from server.query_handler import generate_chat_title

# In generate_chat_title function (query_handler.py)
# Change model_name parameter:
def generate_chat_title(first_message: str, model_name: str = 'llama3:8b'):
    # Change to any Ollama model:
    # 'mistral', 'codellama', 'llama3:70b', etc.
```

### Adjust Title Length
Edit [server/query_handler.py:714-722](server/query_handler.py#L714-L722):
```python
# Find this section:
words = title.split()
if len(words) > 6:  # Change 6 to desired max words
    title = ' '.join(words[:6])
```

## API Reference

### Generate Title Endpoint
```typescript
POST /api/chats/generate-title
Content-Type: application/json

Request:
{
  "message": "Your first message here"
}

Response:
{
  "success": true,
  "title": "Generated Title Here"
}
```

### Update Session Title
```typescript
PATCH /api/chats/session
Content-Type: application/json

Request:
{
  "sessionId": "uuid-here",
  "title": "New Title"
}

Response:
{
  "success": true,
  "session": { ... }
}
```

## Performance

- **Average time**: 2-3 seconds
- **Timeout**: 30 seconds (then uses fallback)
- **Does NOT block**: You can keep typing while title generates

## Privacy

- Titles generated locally by your Ollama instance
- No data sent to external services
- First message used for generation only

## Next Steps

1. âœ… Start a new chat
2. âœ… Send your first message
3. âœ… Watch the AI generate a smart title
4. âœ… Try regenerating if needed

That's it! Enjoy smarter, more organized chat sessions! ðŸŽ‰
